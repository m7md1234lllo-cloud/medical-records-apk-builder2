{% extends "base.html" %}

{% block title %}ุงูุชูุงุฑูุฑ ุงููุงููุฉ{% endblock %}

{% block content %}
<div class="page-header">
    <h2>๐ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</h2>
    <div class="action-buttons">
        <a href="{{ url_for('backup_database') }}" class="btn btn-success" onclick="return confirm('ุณูุชู ุชูุฒูู ูุณุฎุฉ ูุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ูู ุชุฑูุฏ ุงููุชุงุจุนุฉุ')">
            ๐พ ูุณุฎุฉ ุงุญุชูุงุทูุฉ
        </a>
    </div>
</div>

<div class="backup-info-box" style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; border-right: 6px solid #28a745;">
    <h3 style="color: #155724; margin-bottom: 1rem; font-size: 1.3rem;">๐ก ูุตูุญุฉ: ุงููุณุฎ ุงูุงุญุชูุงุทู</h3>
    <p style="color: #155724; font-size: 1.1rem; line-height: 1.8; margin-bottom: 0.5rem;">
        <strong>ุงุญูุธ ุจูุงูุงุชู:</strong> ุงุถุบุท "๐พ ูุณุฎุฉ ุงุญุชูุงุทูุฉ" ูุชูุฒูู ูุณุฎุฉ ูุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
    </p>
    <p style="color: #155724; font-size: 1.05rem; margin: 0;">
        ๐ ูููุตุญ ุจุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃุณุจูุนูุงู ููุญูุงุธ ุนูู ุจูุงูุงุชู ุขููุฉ!
    </p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">๐ฅ</div>
        <div class="stat-value">{{ stats['total_patients'] }}</div>
        <div class="stat-label">ุฅุฌูุงูู ุงููุฑุถู</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">๐</div>
        <div class="stat-value">{{ stats['total_visits'] }}</div>
        <div class="stat-label">ุฅุฌูุงูู ุงูุฒูุงุฑุงุช</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">๐ฐ</div>
        <div class="stat-value">{{ "%.2f"|format(stats['total_revenue']) }}</div>
        <div class="stat-label">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</div>
    </div>
    
    <div class="stat-card success">
        <div class="stat-icon">โ</div>
        <div class="stat-value">{{ "%.2f"|format(stats['total_collected']) }}</div>
        <div class="stat-label">ุงููุจุงูุบ ุงููุญุตูุฉ</div>
    </div>
    
    <div class="stat-card danger">
        <div class="stat-icon">โ๏ธ</div>
        <div class="stat-value">{{ "%.2f"|format(stats['total_outstanding']) }}</div>
        <div class="stat-label">ุงูุฏููู ุงููุชุจููุฉ</div>
    </div>
</div>

<div class="report-section">
    <h3>๐ด ุฃูุจุฑ ุงูุฏููู</h3>
    {% if top_debtors %}
    <table class="data-table">
        <thead>
            <tr>
                <th>ุงุณู ุงููุฑูุถ</th>
                <th>ุฑูู ุงููุงุชู</th>
                <th>ุงููุจูุบ ุงููุณุชุญู</th>
            </tr>
        </thead>
        <tbody>
            {% for debtor in top_debtors %}
            <tr>
                <td>{{ debtor['name'] }}</td>
                <td>{{ debtor['phone'] or '-' }}</td>
                <td class="debt-amount">{{ "%.2f"|format(debtor['debt']) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">ูุง ุชูุฌุฏ ุฏููู ูุณุฌูุฉ ๐</p>
    {% endif %}
</div>
{% endblock %}
